name: GitHub Actions Demo
run-name: ${{ github.actor }} is testing out GitHub Actions ðŸš€
on: [push]
jobs:
  mpi:
    runs-on: ubuntu-22.04
    strategy:
      fail-fast: false
      matrix:
        compiler: [gcc-12, clang-15]
        mpi: [openmpi, mpich]
    steps:
      - uses: actions/checkout@v4
      - uses: ./.github/actions/setup-mpi
        with:
          compiler: ${{ matrix.compiler }}
          mpi: ${{ matrix.mpi }}
      - name: Print environments
        run: |
          echo "Compiler   : ${{ matrix.compiler }}"
          echo "MPI        : ${{ matrix.mpi }}"
          echo "# of cores : $(nproc)"
          [ ! -x "$(command -v ucx_info)" ] || ucx_info -v
          mpicc --version
          mpicxx --version
          mpiexec --version
